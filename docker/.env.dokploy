# ------------------------------
# Dokploy Dify Configuration
# Minimal setup for PostgreSQL + Weaviate
# ------------------------------

# ------------------------------
# Database Configuration (PostgreSQL)
# ------------------------------
DB_USERNAME=postgres
DB_PASSWORD=difyai123456
DB_HOST=db
DB_PORT=5432
DB_DATABASE=dify

# ------------------------------
# Redis Configuration
# ------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=difyai123456
CELERY_BROKER_URL=redis://:difyai123456@redis:6379/1

# ------------------------------
# Vector Store Configuration (Weaviate)
# ------------------------------
VECTOR_STORE=weaviate
WEAVIATE_ENDPOINT=http://weaviate:8080
WEAVIATE_API_KEY=WVF5YThaHlkYwhGUSmCRgsX3tD5ngdN8pkih

# ------------------------------
# Storage Configuration
# ------------------------------
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=storage

# ------------------------------
# Security
# ------------------------------
# IMPORTANT: Generate a strong secret key using: openssl rand -base64 42
SECRET_KEY=sk-9f73s3ljTXVcMT3Blb3ljTqtsKiGHXVcMT3BlbkFJLK7U

# Sandbox API Key
SANDBOX_API_KEY=dify-sandbox

# Plugin Daemon Keys
PLUGIN_DAEMON_URL=http://plugin_daemon:5002
PLUGIN_DAEMON_KEY=lYkiYYT6owG+71oLerGzA7GXCgOT++6ovaezWAjpCjf+Sjc3ZtU+qUEi
PLUGIN_DIFY_INNER_API_KEY=QaHbTe77CtuXmsfyhR7+vRjI/+XbV1AaFy691iy+kGDv2Jvy0/eAh8Y1
DB_PLUGIN_DATABASE=dify_plugin
PLUGIN_REMOTE_INSTALL_HOST=plugin_daemon
PLUGIN_REMOTE_INSTALL_PORT=5003

# ------------------------------
# URLs (Update these for your Dokploy deployment)
# ------------------------------
# IMPORTANT: Set all URLs to your SINGLE Dokploy domain
# Nginx will handle internal routing to web and api services
#
# For production with Dokploy, use your domain:
CONSOLE_WEB_URL=https://dify.yourdomain.com
CONSOLE_API_URL=https://dify.yourdomain.com
SERVICE_API_URL=https://dify.yourdomain.com
APP_WEB_URL=https://dify.yourdomain.com
APP_API_URL=https://dify.yourdomain.com
FILES_URL=https://dify.yourdomain.com
#
# For local testing:
# CONSOLE_WEB_URL=http://localhost
# CONSOLE_API_URL=http://localhost
# SERVICE_API_URL=http://localhost
# APP_WEB_URL=http://localhost
# APP_API_URL=http://localhost
# FILES_URL=http://localhost

# ------------------------------
# Application Configuration
# ------------------------------
LOG_LEVEL=INFO
DEPLOY_ENV=PRODUCTION
# Enable migrations on API startup
MIGRATION_ENABLED=true

# Disable telemetry
NEXT_TELEMETRY_DISABLED=1

# ------------------------------
# Optional: Initial Admin Password
# ------------------------------
# Set this to create an admin user with a specific password on first startup
# INIT_PASSWORD=

# ------------------------------
# Code Execution Limits
# ------------------------------
CODE_MAX_STRING_LENGTH=80000
CODE_MAX_OBJECT_ARRAY_LENGTH=30
CODE_MAX_NUMBER_ARRAY_LENGTH=1000
